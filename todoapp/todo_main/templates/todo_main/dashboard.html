<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App | Dashboard</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'todo_main/css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'todo_main/css/dashboard.css' %}">
</head>

<body>

    <div class="content">
        <h1>Dashboard</h1>

        <h2>Add New Todo</h2>
        <form method="post" action="{% url 'add_todo' %}" id="add_form">
            {% csrf_token %}
            <input type="text" name="title" placeholder="Todo title" required>
            <input type="text" name="description" placeholder="Description (optional)">
            <button type="submit" class="add_btn">Add Todo</button>
        </form>

        <hr>

        <ul id="todo_list">
            {% if todos|length == 0 %}
            <li id="no_todos_label">~ no todos ~</li>
            {% else %}

            {% for todo in todos %}
            <li class="todo_item">
                <span class="todo_item_title"><span class="title">Title:</span> {{todo.title}}</span>
                <span class="todo_item_title"><span class="description">Description:</span> {% if todo.description %}{{todo.description}}{% else %}no
                    description{% endif %}</span>
                <!-- Toggle button -->
                <div class="todo_item_btn_container">
                    <form method="post" action="{% url 'toggle_todo' todo.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="toggle_btn {% if todo.completed %}completed{% endif %}">
                            âœ“ Completed
                        </button>
                    </form>

                    <!-- Delete button -->
                    <form method="post" action="{% url 'delete_todo' todo.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="delete_btn">Delete</button>
                    </form>
                </div>

            </li>
            {% endfor %}

            {% endif %}
        </ul>
    </div>

</body>

</html>